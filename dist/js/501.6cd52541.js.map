{"version":3,"file":"js/501.6cd52541.js","mappings":"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","sources":["webpack://popcorn-vue/./src/views/FinalCart.vue","webpack://popcorn-vue/./src/views/FinalCart.vue?15c4"],"sourcesContent":["<template>\r\n  <Loading :active=\"isLoading\"></Loading>\r\n  <div class=\"wrap\">\r\n    <div class=\"cart-container\">\r\n      <h2>購物車</h2>\r\n      <ul>\r\n        <li>Step1<br />購物內容</li>\r\n        <li>Step2<br />填寫資料</li>\r\n        <li>Step3<br />完成訂單</li>\r\n      </ul>\r\n      <div class=\"cart-body\">\r\n        <div class=\"box\" v-for=\"item in cart.carts\" :key=\"item.id\">\r\n          <img :src=\"item.product.imageUrl\" alt=\"\" />\r\n          <h3>\r\n            {{ item.product.title }}<br /><small v-if=\"item.coupon\"\r\n              >已套用優惠券</small\r\n            >\r\n          </h3>\r\n          <div class=\"count\">\r\n            <button @click=\"minus(item)\">\r\n              <font-awesome-icon :icon=\"['fas', 'minus']\" />\r\n            </button>\r\n            <input\r\n              type=\"number\"\r\n              min=\"1\"\r\n              v-model.number=\"item.qty\"\r\n              @change=\"updateCart(item)\"\r\n            />\r\n            <button @click=\"plus(item)\">\r\n              <font-awesome-icon :icon=\"['fas', 'plus']\" />\r\n            </button>\r\n          </div>\r\n          <h4>${{ item.product.price }}元 / {{ item.product.unit }}</h4>\r\n          <h4>\r\n            <small v-if=\"cart.final_total !== cart.total\">折扣價：</small>\r\n            ${{ $filters.currency(item.final_total) }}元\r\n          </h4>\r\n          <button\r\n            type=\"button\"\r\n            class=\"cart-del\"\r\n            :disabled=\"loadingItem === item.id\"\r\n            @click=\"removeCartItem(item.id)\"\r\n          >\r\n            <font-awesome-icon :icon=\"['fas', 'trash-can']\" />\r\n          </button>\r\n        </div>\r\n        <div class=\"box-footer\">\r\n          <div class=\"coupon\">\r\n            <input\r\n              type=\"text\"\r\n              class=\"form-control\"\r\n              v-model=\"coupon_code\"\r\n              placeholder=\"請輸入優惠碼\"\r\n            />\r\n            <button type=\"button\" @click=\"addCouponCode()\">套用優惠碼</button>\r\n          </div>\r\n          <div class=\"price\">\r\n            <h4>總計：${{ $filters.currency(cart.total) }}元</h4>\r\n            <strong v-if=\"cart.final_total !== cart.total\">\r\n              折扣價：${{ $filters.currency(cart.final_total) }}元\r\n            </strong>\r\n          </div>\r\n        </div>\r\n        <div class=\"cart-footer\">\r\n          <router-link to=\"/product/index\">繼續購物</router-link>\r\n          <router-link to=\"/final/check\">下一步</router-link>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState, mapActions } from \"pinia\";\r\nimport productStore from \"@/stores/productStore\";\r\nimport statusStore from \"@/stores/statusStore\";\r\nimport cartStore from \"@/stores/cartStore\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      coupon_code: \"\",\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapState(productStore, [\"products\", \"product\"]),\r\n    ...mapState(statusStore, [\"isLoading\", \"loadingItem\"]),\r\n    ...mapState(cartStore, [\"cart\", \"cartLen\"]),\r\n  },\r\n  methods: {\r\n    ...mapActions(productStore, [\"getProducts\"]),\r\n    ...mapActions(cartStore, [\"getCart\", \"updateCart\", \"removeCartItem\"]),\r\n\r\n    plus(item) {\r\n      item.qty += 1;\r\n      this.updateCart(item);\r\n    },\r\n    minus(item) {\r\n      if (item.qty > 1) {\r\n        item.qty -= 1;\r\n        this.updateCart(item);\r\n      }\r\n    },\r\n    addCouponCode() {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/coupon`;\r\n      // status.isLoading = true;\r\n      const coupon = {\r\n        code: this.coupon_code,\r\n      };\r\n      this.$http.post(url, { data: coupon }).then((response) => {\r\n        // this.$httpMessageState(response, \"加入優惠券\");\r\n        this.getCart();\r\n        // status.isLoading = false;\r\n      });\r\n    },\r\n  },\r\n  created() {\r\n    this.getProducts();\r\n    this.getCart();\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import \"@/assets/css/viewsScss/_finalcart\";\r\n</style>","import { render } from \"./FinalCart.vue?vue&type=template&id=32f240aa&scoped=true\"\nimport script from \"./FinalCart.vue?vue&type=script&lang=js\"\nexport * from \"./FinalCart.vue?vue&type=script&lang=js\"\n\nimport \"./FinalCart.vue?vue&type=style&index=0&id=32f240aa&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\d93fu\\\\Desktop\\\\popcorn-vue\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-32f240aa\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_createVNode","_component_Loading","active","_ctx","_hoisted_3","_hoisted_4","_createElementBlock","_Fragment","_renderList","carts","item","key","id","src","product","imageUrl","alt","title","_hoisted_7","coupon","_hoisted_8","onClick","$options","_component_font_awesome_icon","icon","type","min","qty","$event","onChange","_toDisplayString","price","unit","final_total","total","_hoisted_13","currency","disabled","$data","placeholder","_hoisted_18","_component_router_link","to","data","coupon_code","computed","mapState","productStore","statusStore","cartStore","methods","mapActions","plus","this","updateCart","minus","addCouponCode","url","code","$http","post","then","response","getCart","created","getProducts","__exports__","render"],"sourceRoot":""}