{"version":3,"file":"js/337.41cb9241.js","mappings":"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","sources":["webpack://popcorn-vue/./src/views/FinalCart.vue","webpack://popcorn-vue/./src/views/FinalCart.vue?15c4"],"sourcesContent":["<template>\r\n<Loading :active=\"isLoading\"></Loading>\r\n  <div class=\"wrap\">\r\n    <div class=\"cart-container\">\r\n      <h2>購物車</h2>\r\n      <ul>\r\n        <li>Step1<br />購物內容</li>\r\n        <li>Step2<br />填寫資料</li>\r\n        <li>Step3<br />完成訂單</li>\r\n      </ul>\r\n      <div class=\"cart-body\">\r\n        <div class=\"box\" v-for=\"item in cart.carts\" :key=\"item.id\">\r\n          <img :src=\"item.product.imageUrl\" alt=\"\" />\r\n          <h3>\r\n            {{ item.product.title }}<br /><small v-if=\"item.coupon\"\r\n              >已套用優惠券</small\r\n            >\r\n          </h3>\r\n          <div class=\"count\">\r\n            <button @click=\"minus(item)\">\r\n              <font-awesome-icon :icon=\"['fas', 'minus']\" />\r\n            </button>\r\n            <input\r\n              type=\"number\"\r\n              min=\"1\"\r\n              v-model.number=\"item.qty\"\r\n              @change=\"updateCart(item)\"\r\n            />\r\n            <button @click=\"plus(item)\">\r\n              <font-awesome-icon :icon=\"['fas', 'plus']\" />\r\n            </button>\r\n          </div>\r\n          <h4>${{ item.product.price }}元 / {{ item.product.unit }}</h4>\r\n          <h4>\r\n            <small v-if=\"cart.final_total !== cart.total\">折扣價：</small>\r\n            ${{ $filters.currency(item.final_total) }}元\r\n          </h4>\r\n          <button\r\n            type=\"button\"\r\n            class=\"cart-del\"\r\n            :disabled=\"status.loadingItem === item.id\"\r\n            @click=\"removeCartItem(item.id)\"\r\n          >\r\n            <font-awesome-icon :icon=\"['fas', 'trash-can']\" />\r\n          </button>\r\n        </div>\r\n        <div class=\"box-footer\">\r\n          <div class=\"coupon\">\r\n            <input\r\n              type=\"text\"\r\n              class=\"form-control\"\r\n              v-model=\"coupon_code\"\r\n              placeholder=\"請輸入優惠碼\"\r\n            />\r\n            <button type=\"button\" @click=\"addCouponCode()\">套用優惠碼</button>\r\n          </div>\r\n          <div class=\"price\">\r\n            <h4>總計：${{ $filters.currency(cart.total) }}元</h4>\r\n            <strong v-if=\"cart.final_total !== cart.total\">\r\n              折扣價：${{ $filters.currency(cart.final_total) }}元\r\n            </strong>\r\n          </div>\r\n        </div>\r\n        <div class=\"cart-footer\">\r\n          <router-link to=\"/product/index\">繼續購物</router-link>\r\n          <router-link to=\"/final/check\">下一步</router-link>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style lang=\"scss\" scoped>\r\nimg {\r\n  width: 13%;\r\n  height: auto;\r\n  vertical-align: middle;\r\n  @media screen and (max-width: 768px) {\r\n    width: 100%;\r\n  }\r\n}\r\n.wrap {\r\n  font-family: 'Noto Sans TC', sans-serif;\r\n  font-weight: 300;\r\n  margin-top: 150px;\r\n  @media screen and (max-width: 768px) {\r\n    margin-top: 100px;\r\n  }\r\n  .cart-container {\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n    margin: auto;\r\n    max-width: 1200px;\r\n    width: 100%;\r\n    height: 100%;\r\n    h2 {\r\n      font-size: 40px;\r\n      color: #93a38a;\r\n      position: relative;\r\n      margin-bottom: 40px;\r\n      text-align: center;\r\n      &:after {\r\n        content: \"\";\r\n        width: 200px;\r\n        border-bottom: 5px dotted #93a38a;\r\n        position: absolute;\r\n        bottom: -50%;\r\n        left: 50%;\r\n        transform: translate(-50%, -50%);\r\n      }\r\n    }\r\n    ul {\r\n      display: flex;\r\n      justify-content: space-around;\r\n      position: relative;\r\n      @media screen and (max-width: 768px) {\r\n        flex-direction: column;\r\n        justify-content: center;\r\n        margin: 0 10px;\r\n      }\r\n      &:before {\r\n        content: \"\";\r\n        position: absolute;\r\n        bottom: -30px;\r\n        left: 0;\r\n        width: 100%;\r\n        border-top: 3px solid #d6d6ca;\r\n      }\r\n    }\r\n    li {\r\n      background: #949494;\r\n      border-radius: 15px;\r\n      padding: 20px 80px;\r\n      font-size: 22px;\r\n      text-align: center;\r\n      line-height: 30px;\r\n      color: white;\r\n      @media screen and (max-width: 768px) {\r\n        font-size: 18px;\r\n        padding: 10px;\r\n        border-radius: 0px;\r\n      }\r\n      &:first-child {\r\n        background-color: #93a38a;\r\n      }\r\n    }\r\n  }\r\n  .cart-body {\r\n    margin-top: 40px;\r\n    @media screen and (max-width: 768px) {\r\n      margin: 40px 10px 0 10px;\r\n    }\r\n  }\r\n  .box {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    background-color: #e9f0f3;\r\n    margin: 10px 0;\r\n    @media screen and (max-width: 768px) {\r\n      flex-direction: column;\r\n    }\r\n    h3 {\r\n      font-weight: 500;\r\n      font-size: 26px;\r\n      color: #949494;\r\n      position: relative;\r\n      margin: 50px 0;\r\n      text-align: center;\r\n      @media screen and (max-width: 768px) {\r\n        margin: 10px 0;\r\n      }\r\n    }\r\n    h4 {\r\n      font-size: 26px;\r\n      color: #949494;\r\n      position: relative;\r\n      margin: 50px 0;\r\n      text-align: center;\r\n      @media screen and (max-width: 768px) {\r\n        margin: 10px 0;\r\n      }\r\n    }\r\n    small {\r\n      font-size: 16px;\r\n      color: #d67675;\r\n    }\r\n    .count {\r\n      display: flex;\r\n      margin: 20px 0;\r\n      align-items: center;\r\n      button {\r\n        width: 30px;\r\n        height: 30px;\r\n        border: none;\r\n        background-color: #d6d6ca;\r\n        svg {\r\n          transition: .3s ease-in-out;\r\n          color: #949494;\r\n        }\r\n        &:hover svg {\r\n          transform: scale(1.2);\r\n        }\r\n      }\r\n      input {\r\n        width: 150px;\r\n        height: 30px;\r\n        text-align: center;\r\n        border: 1px solid #d6d6ca;\r\n        font-size: 20px;\r\n        color: #949494;\r\n      }\r\n    }\r\n    .cart-del {\r\n      background-color: transparent;\r\n      border: none;\r\n      font-size: 20px;\r\n      color: #d67675;\r\n      transition: .3s ease-in-out;\r\n      margin-right: 30px;\r\n      &:hover {\r\n        transform: scale(1.1);\r\n      }\r\n    }\r\n  }\r\n  .box-footer {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    position: relative;\r\n    margin: 40px 0;\r\n    @media screen and (max-width: 768px) {\r\n      flex-direction: column;\r\n      margin: 40px 0 0 0;\r\n    }\r\n    &:before {\r\n      content: \"\";\r\n      position: absolute;\r\n      top: -20px;\r\n      left: 0;\r\n      width: 100%;\r\n      border-top: 3px solid #d6d6ca;\r\n    }\r\n    .coupon {\r\n      display: flex;\r\n      @media screen and (max-width: 768px) {\r\n        justify-content: center;\r\n      }\r\n      input {\r\n        font-weight: 300;\r\n        width: 60%;\r\n      }\r\n      button {\r\n        font-weight: 300;\r\n        margin-left: 10px;\r\n        border: none;\r\n        background-color: #d6d6ca;\r\n        color: #949494;\r\n        transition: .3s ease-in-out;\r\n        border-radius: 3px;\r\n        &:hover {\r\n          transform: scale(1.1);\r\n        }\r\n      }\r\n    }\r\n    .price {\r\n      display: flex;\r\n      @media screen and (max-width: 768px) {\r\n        justify-content: center;\r\n        text-align: center;\r\n        margin: 10px 5px;\r\n        font-size: 22px;\r\n      }\r\n      strong {\r\n        color: #d67675;\r\n        margin-left: 30px;\r\n      }\r\n    }\r\n  }\r\n  .cart-footer {\r\n    display: flex;\r\n    justify-content: center;\r\n    margin: auto;\r\n    padding-bottom: 30px;\r\n    @media screen and (max-width: 768px) {\r\n      flex-direction: column;\r\n      align-items: center;\r\n    }\r\n    a {\r\n      text-decoration: none;\r\n      color: white;\r\n      font-size: 22px;\r\n      background-color: #93a38a;\r\n      width: 200px;\r\n      border-radius: 10px;\r\n      text-align: center;\r\n      padding: 20px 0;\r\n      margin-left: 30px;\r\n      transition: .3s ease-in-out;\r\n      @media screen and (max-width: 768px) {\r\n        margin: 10px 0 0 0;\r\n      }\r\n      &:hover {\r\n        transform: scale(1.1);\r\n      }\r\n      &:first-child {\r\n        background-color: #949494;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      products: [],\r\n      product: {},\r\n      status: {\r\n        loadingItem: \"\", //對應品項id\r\n      },\r\n      cart: {},\r\n      coupon_code: \"\",\r\n    };\r\n  },\r\n  methods: {\r\n    plus(item) {\r\n      item.qty += 1;\r\n      this.updateCart(item);\r\n    },\r\n    minus(item) {\r\n      if (item.qty > 1) {\r\n        item.qty -= 1;\r\n        this.updateCart(item);\r\n      }\r\n    },\r\n    getProducts() {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`;\r\n      this.isLoading = true;\r\n      this.$http.get(url).then((res) => {\r\n        this.isLoading = false;\r\n        this.products = res.data.products;\r\n      });\r\n    },\r\n    getCart() {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\r\n      this.isLoading = true;\r\n      this.$http.get(url).then((res) => {\r\n        this.cart = res.data.data;\r\n        this.isLoading = false;\r\n      });\r\n    },\r\n    updateCart(item) {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${item.id}`;\r\n      this.isLoading = true;\r\n      this.status.loadingItem = item.id;\r\n      const cart = {\r\n        product_id: item.product_id,\r\n        qty: item.qty,\r\n      };\r\n      this.$http.put(url, { data: cart }).then((res) => {\r\n        this.status.loadingItem = \"\";\r\n        this.getCart();\r\n      });\r\n    },\r\n    removeCartItem(id) {\r\n      this.status.loadingItem = id;\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${id}`;\r\n      this.isLoading = true;\r\n      this.$http.delete(url).then((res) => {\r\n        this.$httpMessageState(res, \"移除購物車品項\");\r\n        this.status.loadingItem = \"\";\r\n        this.getCart();\r\n        this.isLoading = false;\r\n      });\r\n    },\r\n    addCouponCode() {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/coupon`;\r\n      const coupon = {\r\n        code: this.coupon_code,\r\n      };\r\n      this.isLoading = true;\r\n      this.$http.post(url, { data: coupon }).then((response) => {\r\n        this.$httpMessageState(response, \"加入優惠券\");\r\n        this.getCart();\r\n        this.isLoading = false;\r\n      });\r\n    },\r\n  },\r\n  created() {\r\n    this.getProducts();\r\n    this.getCart();\r\n  },\r\n};\r\n</script>","import { render } from \"./FinalCart.vue?vue&type=template&id=6569e84f&scoped=true\"\nimport script from \"./FinalCart.vue?vue&type=script&lang=js\"\nexport * from \"./FinalCart.vue?vue&type=script&lang=js\"\n\nimport \"./FinalCart.vue?vue&type=style&index=0&id=6569e84f&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\d93fu\\\\Desktop\\\\popcorn-vue\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6569e84f\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_createVNode","_component_Loading","active","_ctx","_hoisted_3","_hoisted_4","_createElementBlock","_Fragment","_renderList","$data","carts","item","key","id","src","product","imageUrl","alt","title","_hoisted_7","coupon","_hoisted_8","onClick","$options","_component_font_awesome_icon","icon","type","min","qty","$event","onChange","_toDisplayString","price","unit","final_total","total","_hoisted_13","currency","disabled","loadingItem","placeholder","_hoisted_18","_component_router_link","to","data","products","status","cart","coupon_code","methods","plus","this","updateCart","minus","getProducts","url","isLoading","$http","get","then","res","getCart","product_id","put","removeCartItem","delete","$httpMessageState","addCouponCode","code","post","response","created","__exports__","render"],"sourceRoot":""}