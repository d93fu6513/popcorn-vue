{"version":3,"file":"js/780.ab8d7d39.js","mappings":"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","sources":["webpack://popcorn-vue/./src/views/FinalCart.vue","webpack://popcorn-vue/./src/views/FinalCart.vue?15c4"],"sourcesContent":["<template>\r\n  <Loading :active=\"isLoading\"></Loading>\r\n  <div class=\"wrap\">\r\n    <div class=\"cart-container\">\r\n      <h2>購物車</h2>\r\n      <ul>\r\n        <li>Step1<br />購物內容</li>\r\n        <li>Step2<br />填寫資料</li>\r\n        <li>Step3<br />完成訂單</li>\r\n      </ul>\r\n      <div class=\"cart-body\">\r\n        <div class=\"box\" v-for=\"item in cart.carts\" :key=\"item.id\">\r\n          <img :src=\"item.product.imageUrl\" alt=\"\" />\r\n          <h3>\r\n            {{ item.product.title }}<br /><small v-if=\"item.coupon\"\r\n              >已套用優惠券</small\r\n            >\r\n          </h3>\r\n          <div class=\"count\">\r\n            <button @click=\"minus(item)\">\r\n              <font-awesome-icon :icon=\"['fas', 'minus']\" />\r\n            </button>\r\n            <input\r\n              type=\"number\"\r\n              min=\"1\"\r\n              v-model.number=\"item.qty\"\r\n              @change=\"updateCart(item)\"\r\n            />\r\n            <button @click=\"plus(item)\">\r\n              <font-awesome-icon :icon=\"['fas', 'plus']\" />\r\n            </button>\r\n          </div>\r\n          <h4>${{ item.product.price }}元 / {{ item.product.unit }}</h4>\r\n          <h4>\r\n            <small v-if=\"item.coupon\">已折扣</small>\r\n            小計：${{ $filters.currency(item.final_total) }}元\r\n          </h4>\r\n          <button\r\n            type=\"button\"\r\n            class=\"cart-del\"\r\n            :disabled=\"status.loadingItem === item.id\"\r\n            @click=\"removeCartItem(item.id)\"\r\n          >\r\n            <font-awesome-icon :icon=\"['fas', 'trash-can']\" />\r\n          </button>\r\n        </div>\r\n        <div class=\"box-footer\">\r\n          <div class=\"coupon\">\r\n            <input\r\n              type=\"text\"\r\n              class=\"form-control\"\r\n              v-model=\"coupon_code\"\r\n              placeholder=\"請輸入優惠碼\"\r\n            />\r\n            <button type=\"button\" @click=\"addCouponCode()\">套用優惠碼</button>\r\n          </div>\r\n          <div class=\"price\">\r\n            <div class=\"discount\"  v-if=\"cart.final_total !== cart.total\">\r\n            <h4>總計：${{ $filters.currency(cart.total) }}元</h4>  \r\n            <strong>\r\n              折扣價：${{ $filters.currency(cart.final_total) }}元\r\n            </strong>\r\n            </div>\r\n            <h4 v-else>總計：${{ $filters.currency(cart.total) }}元</h4>\r\n          </div>\r\n        </div>\r\n        <div class=\"cart-footer\">\r\n          <router-link to=\"/product/index\">繼續購物</router-link>\r\n          <router-link to=\"/final/check\">下一步</router-link>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      products: [],\r\n      product: {},\r\n      status: {\r\n        loadingItem: \"\", //對應品項id\r\n      },\r\n      cart: {},\r\n      coupon_code: \"\",\r\n    };\r\n  },\r\n  methods: {\r\n    plus(item) {\r\n      item.qty += 1;\r\n      this.updateCart(item);\r\n    },\r\n    minus(item) {\r\n      if (item.qty > 1) {\r\n        item.qty -= 1;\r\n        this.updateCart(item);\r\n      }\r\n    },\r\n    getProducts() {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`;\r\n      this.isLoading = true;\r\n      this.$http.get(url).then((res) => {\r\n        this.products = res.data.products;\r\n        this.isLoading = false;\r\n      });\r\n    },\r\n    getCart() {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\r\n      this.isLoading = true;\r\n      this.$http.get(url).then((res) => {\r\n        this.cart = res.data.data;\r\n        this.isLoading = false;\r\n      });\r\n    },\r\n    updateCart(item) {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${item.id}`;\r\n      this.isLoading = true;\r\n      this.status.loadingItem = item.id;\r\n      const cart = {\r\n        product_id: item.product_id,\r\n        qty: item.qty,\r\n      };\r\n      this.$http.put(url, { data: cart }).then((res) => {\r\n        this.status.loadingItem = \"\";\r\n        this.isLoading = false;\r\n        this.getCart();\r\n      });\r\n    },\r\n    removeCartItem(id) {\r\n      this.status.loadingItem = id;\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${id}`;\r\n      this.isLoading = true;\r\n      this.$http.delete(url).then((res) => {\r\n        this.$httpMessageState(res, \"移除購物車品項\");\r\n        this.status.loadingItem = \"\";\r\n        this.getCart();\r\n        this.isLoading = false;\r\n      });\r\n    },\r\n    addCouponCode() {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/coupon`;\r\n      this.isLoading = true;\r\n      const coupon = {\r\n        code: this.coupon_code,\r\n      };      \r\n      this.$http.post(url, { data: coupon }).then((response) => {\r\n        this.$httpMessageState(response, \"加入優惠券\");\r\n        this.getCart();\r\n        this.isLoading = false;\r\n      });\r\n    },\r\n  },\r\n  created() {\r\n    this.getProducts();\r\n    this.getCart();\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import \"@/assets/css/viewsScss/_finalcart\";\r\n</style>","import { render } from \"./FinalCart.vue?vue&type=template&id=6bc1bb1e&scoped=true\"\nimport script from \"./FinalCart.vue?vue&type=script&lang=js\"\nexport * from \"./FinalCart.vue?vue&type=script&lang=js\"\n\nimport \"./FinalCart.vue?vue&type=style&index=0&id=6bc1bb1e&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\d93fu\\\\Desktop\\\\popcorn-vue\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6bc1bb1e\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_createVNode","_component_Loading","active","_ctx","_hoisted_3","_hoisted_4","_createElementBlock","_Fragment","_renderList","$data","carts","item","key","id","src","product","imageUrl","alt","title","_hoisted_7","coupon","_hoisted_8","onClick","$options","_component_font_awesome_icon","icon","type","min","qty","$event","onChange","_toDisplayString","price","unit","_hoisted_13","currency","final_total","disabled","loadingItem","placeholder","total","_hoisted_19","_component_router_link","to","data","products","status","cart","coupon_code","methods","plus","this","updateCart","minus","getProducts","url","isLoading","$http","get","then","res","getCart","product_id","put","removeCartItem","delete","$httpMessageState","addCouponCode","code","post","response","created","__exports__","render"],"sourceRoot":""}