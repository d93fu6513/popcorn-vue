"use strict";(self["webpackChunkpopcorn_vue"]=self["webpackChunkpopcorn_vue"]||[]).push([[501],{7501:function(t,o,n){n.r(o),n.d(o,{default:function(){return H}});var a=n(3396),l=n(7139),e=n(9242);const c=t=>((0,a.dD)("data-v-32f240aa"),t=t(),(0,a.Cn)(),t),r={class:"wrap"},u={class:"cart-container"},i=c((()=>(0,a._)("h2",null,"購物車",-1))),s=c((()=>(0,a._)("ul",null,[(0,a._)("li",null,[(0,a.Uk)("Step1"),(0,a._)("br"),(0,a.Uk)("購物內容")]),(0,a._)("li",null,[(0,a.Uk)("Step2"),(0,a._)("br"),(0,a.Uk)("填寫資料")]),(0,a._)("li",null,[(0,a.Uk)("Step3"),(0,a._)("br"),(0,a.Uk)("完成訂單")])],-1))),d={class:"cart-body"},p=["src"],_=c((()=>(0,a._)("br",null,null,-1))),k={key:0},m={class:"count"},h=["onClick"],f=["onUpdate:modelValue","onChange"],C=["onClick"],v={key:0},g=["disabled","onClick"],w={class:"box-footer"},y={class:"coupon"},b={class:"price"},U={key:0},q={class:"cart-footer"},$=(0,a.Uk)("繼續購物"),D=(0,a.Uk)("下一步");function z(t,o,n,c,z,W){const Z=(0,a.up)("Loading"),x=(0,a.up)("font-awesome-icon"),I=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(Z,{active:t.isLoading},null,8,["active"]),(0,a._)("div",r,[(0,a._)("div",u,[i,s,(0,a._)("div",d,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.cart.carts,(o=>((0,a.wg)(),(0,a.iD)("div",{class:"box",key:o.id},[(0,a._)("img",{src:o.product.imageUrl,alt:""},null,8,p),(0,a._)("h3",null,[(0,a.Uk)((0,l.zw)(o.product.title),1),_,o.coupon?((0,a.wg)(),(0,a.iD)("small",k,"已套用優惠券")):(0,a.kq)("",!0)]),(0,a._)("div",m,[(0,a._)("button",{onClick:t=>W.minus(o)},[(0,a.Wm)(x,{icon:["fas","minus"]})],8,h),(0,a.wy)((0,a._)("input",{type:"number",min:"1","onUpdate:modelValue":t=>o.qty=t,onChange:n=>t.updateCart(o)},null,40,f),[[e.nr,o.qty,void 0,{number:!0}]]),(0,a._)("button",{onClick:t=>W.plus(o)},[(0,a.Wm)(x,{icon:["fas","plus"]})],8,C)]),(0,a._)("h4",null,"$"+(0,l.zw)(o.product.price)+"元 / "+(0,l.zw)(o.product.unit),1),(0,a._)("h4",null,[t.cart.final_total!==t.cart.total?((0,a.wg)(),(0,a.iD)("small",v,"折扣價：")):(0,a.kq)("",!0),(0,a.Uk)(" $"+(0,l.zw)(t.$filters.currency(o.final_total))+"元 ",1)]),(0,a._)("button",{type:"button",class:"cart-del",disabled:t.loadingItem===o.id,onClick:n=>t.removeCartItem(o.id)},[(0,a.Wm)(x,{icon:["fas","trash-can"]})],8,g)])))),128)),(0,a._)("div",w,[(0,a._)("div",y,[(0,a.wy)((0,a._)("input",{type:"text",class:"form-control","onUpdate:modelValue":o[0]||(o[0]=t=>z.coupon_code=t),placeholder:"請輸入優惠碼"},null,512),[[e.nr,z.coupon_code]]),(0,a._)("button",{type:"button",onClick:o[1]||(o[1]=t=>W.addCouponCode())},"套用優惠碼")]),(0,a._)("div",b,[(0,a._)("h4",null,"總計：$"+(0,l.zw)(t.$filters.currency(t.cart.total))+"元",1),t.cart.final_total!==t.cart.total?((0,a.wg)(),(0,a.iD)("strong",U," 折扣價：$"+(0,l.zw)(t.$filters.currency(t.cart.final_total))+"元 ",1)):(0,a.kq)("",!0)])]),(0,a._)("div",q,[(0,a.Wm)(I,{to:"/product/index"},{default:(0,a.w5)((()=>[$])),_:1}),(0,a.Wm)(I,{to:"/final/check"},{default:(0,a.w5)((()=>[D])),_:1})])])])])],64)}var W=n(3766),Z=n(4238),x=n(6294),I=n(4677),L={data(){return{coupon_code:""}},computed:{...(0,W.rn)(Z.Z,["products","product"]),...(0,W.rn)(x.Z,["isLoading","loadingItem"]),...(0,W.rn)(I.Z,["cart","cartLen"])},methods:{...(0,W.nv)(Z.Z,["getProducts"]),...(0,W.nv)(I.Z,["getCart","updateCart","removeCartItem"]),plus(t){t.qty+=1,this.updateCart(t)},minus(t){t.qty>1&&(t.qty-=1,this.updateCart(t))},addCouponCode(){const t="https://vue3-course-api.hexschool.io/api/luckypopcorn-api/coupon",o={code:this.coupon_code};this.$http.post(t,{data:o}).then((t=>{this.getCart()}))}},created(){this.getProducts(),this.getCart()}},S=n(89);const V=(0,S.Z)(L,[["render",z],["__scopeId","data-v-32f240aa"]]);var H=V}}]);
//# sourceMappingURL=501.6cd52541.js.map